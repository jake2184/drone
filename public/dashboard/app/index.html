<!DOCTYPE html>
<html lang="en" >
  <head>
    <title>Drone Dashboard</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />

    <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Roboto:400,500,700,400italic'>
    <link rel="stylesheet" href="../node_modules/angular-material/angular-material.css"/>
    <link rel="stylesheet" href="assets/app.css"/>
	<link rel="stylesheet" href="../node_modules/angular-chart.js/dist/angular-chart.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <style type="text/css">
        /**
         * Hide when Angular is not yet loaded and initialized
         */
        [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
          display: none !important;
        }
    </style>

  </head>

  <body ng-app="starterApp" layout="column" ng-controller="DashboardController as dl" ng-cloak>

    <md-toolbar layout="row">
        <div class="md-toolbar-tools">
            <h2>The 'Saving The World' Drone Dashboard</h2>
            <span flex></span>
            <md-button class="md-raised" ng-click="dl.showChangeDrone($event)">
                Change Drone
            </md-button>
        </div>
    </md-toolbar>


    <div flex>
        <md-content flex id="content" layout="row">
			<div flex-xs flex-gt-xs="50" layout="column">
				<md-card>
					<md-card-title>
						<md-card-title-text>
							<span class="md-headline">Map View</span>
						</md-card-title-text>
					</md-card-title>
					<md-card-content>
						<div class="angular-google-map">
							<div id="map-canvas" style="height:450px"></div>
						</div>
					</md-card-content>
				</md-card>
                <md-card>
                    <md-card-title>
                        <md-card-title-text>
                            <span class="md-headline">Latest image from {{dl.droneName}}</span>
                        </md-card-title-text>
                    </md-card-title>
                    <md-card-content>
                        <img id="drone_image" ng-src="../../api/{{dl.droneName}}/images/latest?cb={{dl.random}}" style="margin: auto; max-width: 100%;" alt="Drone Captured Image" >
                    </md-card-content>
                </md-card>
            </div>
			<div flex-xs flex-gt-xs="50" layout="column">
                <md-card>
                    <md-card-title>
                        <md-card-title-text>
                            <span class="md-headline">Drone Status:  {{dl.droneName}}</span>
                        </md-card-title-text>
                    </md-card-title>
                    <md-card-content>
                        <md-list>
                            <md-list-item>Connected : {{dl.currentDroneStatus.connection}}</md-list-item>
                            <md-list-item>Mode : {{dl.currentDroneStatus.mode}}</md-list-item>
                        </md-list>
                    </md-card-content>
                </md-card>
                <md-card>
                    <md-card-title>
                        <md-card-title-text>
                            <span class="md-headline">Live Data Chart for {{dl.droneName}}</span>
                        </md-card-title-text>
                    </md-card-title>
                    <md-card-content>
                        <div flex id="chart-div" style="width: 900px; height: 500px;"></div>
                    </md-card-content>
                </md-card>
				<md-card>
                    <md-toolbar class="md-menu-toolbar">
                        <div class="md-toolbar-tools">
                            <h2 class="md-toolbar-tools">Data View</h2>
                            <span flex></span>
                        </div>
                    </md-toolbar>
					<md-card-content>
						<canvas id="line" class="chart chart-line" chart-data="dl.data" chart-labels="dl.labels" chart-legend="true" chart-series="dl.series"></canvas>
                        <div flex layout="row">
                            <md-checkbox ng-model="dl.dataTypes.temperature" ng-change="dl.updateTypes('temperature')">Temperature</md-checkbox>
                            <md-checkbox ng-model="dl.dataTypes.airPurity" ng-change="dl.updateTypes('airPurity')">Air Purity</md-checkbox>
                            <md-checkbox ng-model="dl.dataTypes.altitude" ng-change="dl.updateTypes('altitude')">Altitude</md-checkbox>
                        </div>
					</md-card-content>
				</md-card>
			</div>
        </md-content>
    </div>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3wXmZy0MDqra2yXcxwmUQ6TLCxXE6D1o"></script>
    <script src="../node_modules/angular/angular.js"></script>
    <script src="../node_modules/angular-animate/angular-animate.js"></script>
    <script src="../node_modules/angular-aria/angular-aria.js"></script>
    <script type="text/javascript" src="../node_modules/angular-material/angular-material.js"></script>
	<script src="../node_modules/angular-chart.js/node_modules/chart.js/dist/Chart.js"></script>
	<script src="../node_modules/angular-chart.js/dist/angular-chart.js"></script>
    <script src="../node_modules/angular-websocket/dist/angular-websocket.js"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/t-114/svg-assets-cache.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>

    <script src="./src/dashboard/Dashboard.js"></script>
    <script src="./src/dashboard/DashboardController.js"></script>
    <script src="./src/dashboard/MapService.js"></script>
    <script src="./src/dashboard/ChartService.js"></script>
    <script src="./src/dashboard/LiveChartService.js"></script>

    <script type="text/javascript">
        google.load('visualization', '1', {packages:['corechart']});
    </script>
    <script type="text/javascript">

        angular
            .module('starterApp', ['ngMaterial', 'dashboard', 'chart.js', 'material.svgAssetsCache', 'ngWebSocket'])
            .config(function($mdThemingProvider, $mdIconProvider, ChartJsProvider){

                $mdIconProvider
                        .defaultIconSet('img/icons/sets/core-icons.svg', 24);

                ChartJsProvider.setOptions(
                        {
                            colours: ['#C62828', '#4527A0', '#C62828', '#C62828', '#C62828', '#C62828', '#C62828']
                        });

            });

    </script>

  </body>
</html>
